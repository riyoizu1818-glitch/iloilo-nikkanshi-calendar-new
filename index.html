<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ilo.ilo å¹²æ”¯calendar</title>
<style>
  :root{
    --ink:#333;
    --grid:#dcdcdc;
    --sun:#fc579c;                 /* æ—¥æ›œ */
    --sat:#6585d0;                 /* åœŸæ›œ */
    --sub:#555;
    --bgglass:rgba(255,255,255,.55);
    --todaybg:rgba(244,246,144,.989);
    --nav-btn-bg:#ff68b6;          /* ä¸‹ã®ãƒ”ãƒ³ã‚¯ãƒœã‚¿ãƒ³ */
    --nav-btn-fg:#fff;
  }

  html,body{margin:0;padding:0;color:var(--ink);-webkit-text-size-adjust:100%;}
  body{
    font-family:'Hiragino Kaku Gothic ProN', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans JP", sans-serif;
    background:url('iloiloback.jpg') no-repeat center/cover;
    text-align:center;
  }

  /* â”€â”€ å³ä¸Šï¼šãƒ†ã‚­ã‚¹ãƒˆã®ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â”€â”€ */
  .headnav{
    width:min(720px,92vw);
    margin:8px auto 0;
    display:flex; justify-content:flex-end; align-items:center; flex-wrap:wrap;
    gap:14px;
    font-family:'Futura','Avenir Next','Montserrat',sans-serif;
    font-weight:700; letter-spacing:.02em; font-size:14px;
  }
 /* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
.headnav{
  width:min(720px,92vw);
  margin:8px auto 0;
  display:flex;
  justify-content:flex-end;
  align-items:center;
  font-family:'Futura','Avenir Next','Montserrat',sans-serif;
  font-weight:700;
  letter-spacing:.02em;
  font-size:14px;
  gap:0;  /* â† ã“ã“ã§ä½™ç™½ã¯ã‚¼ãƒ­ã« */
}
.headnav a{
  color:#666;
  text-decoration:none;
  padding:0 12px;   /* â† æ–‡å­—ã¨ç·šã®é–“éš”ã¯ã“ã“ã§èª¿æ•´ */
  position:relative;
}
.headnav a:not(:last-child){
  border-right:1px solid #aaa; /* â† ç·šã‚’å³å´ã«ä»˜ã‘ã‚‹ */
  margin-right:0;              /* â† gapã‚’ã‚¼ãƒ­ã«ã—ã¦ç·šã¨æ–‡å­—ã‚’ä¸€ä½“åŒ– */
}
.headnav a:hover{ opacity:.8; }
  /* === mobile only: ä¸ŠãƒŠãƒ“ã‚’å³ç«¯ã«ãƒ»ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆåŒ– === */
@media (max-width: 480px){
  .headnav{
    justify-content:flex-end;   /* å³å¯„ã› */
    padding-right:15px;         /* å³ç«¯ã‹ã‚‰ã®é€ƒãŒã—é‡ */
    gap:0;                      /* ä½™ç™½ã¯ç·šã§ç®¡ç† */
    align-items:center;
  }

  /* ãƒ†ã‚­ã‚¹ãƒˆã¨ç·šã®â€œå·¦å³ãƒãƒ©ãƒ³ã‚¹â€ã‚’æ±ºã‚ã‚‹ã®ã¯ã“ã“ */
  .headnav a{
    font-size:13px;
    font-weight:700;
    line-height:1;
    padding:3px 7px;            /* â† æ–‡å­—ã®å·¦å³ä½™ç™½ï¼šå¢—ã‚„ã™ã¨â€œæ–‡å­—ã ã‘è©°ã¾ã‚‹â€æ„ŸãŒæ¶ˆãˆã‚‹ */
    letter-spacing:.01em;       /* ã»ã‚“ã®å°‘ã—ã ã‘è©°ã‚ã‚‹ï¼ˆãŠå¥½ã¿ã§ 0ã€œ.02emï¼‰ */
  }

  /* åŒºåˆ‡ã‚Šç·šï¼ˆä¸­å¤®å¯„ã›ï¼†ç´°ãï¼‰ */
  .headnav .sep{
    width:2px;
    height:14px;
    background:#bbb;
    margin:0 5px;               /* â† æ–‡å­—ã¨ç·šã®é–“éš”ï¼šã“ã“ã‚’å¢—æ¸›ã§â€œä¸­å¤®ã«è¦‹ãˆã‚‹â€ä½ç½®åˆã‚ã› */
    align-self:center;
  }
}
  /* ãƒ©ãƒƒãƒ—ï¼†ã‚«ãƒ¼ãƒ‰ */
  .wrap{
    min-height:100svh;
    display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
    padding:16px 16px calc(24px + env(safe-area-inset-bottom));
    gap:14px;
  }
  .card{
    width:min(720px,92vw);
    background:var(--bgglass);
    border-radius:12px;
    box-shadow:0 2px 10px rgba(0,0,0,.08);
    padding:14px 14px 18px;
    backdrop-filter:blur(2px);
    position:relative;
    margin-top:2px;
  }

  .brand{
    font-family:'Futura','Avenir Next','Montserrat',sans-serif;
    font-weight:900; letter-spacing:.02em;
    font-size:22px; margin:2px 0 8px;
  }

  .monthbar{
    position:relative;
    display:flex; justify-content:center; align-items:center;
    margin:4px 0 8px; min-height:44px;
  }
  .centerhead{ display:inline-flex; align-items:baseline; gap:10px; }
  .year{
    font-family:'Futura','Avenir Next','Montserrat',sans-serif;
    font-weight:600; font-size:16px; opacity:.85;
  }
  .month{
    font-family:'Futura','Avenir Next','Montserrat',sans-serif;
    font-weight:800; display:inline-flex; align-items:baseline; gap:4px;
  }
  .m-num{ font-size:56px; line-height:1; }
  .m-kanji{ font-size:14px; line-height:1; }

  /* å¹´æœˆâ–¼ */
  .monthpick{
    position:relative; display:inline-block;
    border:1px solid #cfd6e0; border-radius:6px; background:#fff;
    padding:2px 6px; min-width:50px; text-align:center;
    font-size:11px; color:#333;
  }
  .monthpick .label{ pointer-events:none; }
  .monthpick input[type="month"]{
    position:absolute; inset:0; width:100%; height:100%;
    opacity:0; border:0; background:transparent; appearance:none; -webkit-appearance:none; cursor:pointer;
  }

  /* â—€ï¸ / â–¶ï¸ */
  .edge{
    position:absolute; top:50%; transform:translateY(-50%);
    background:transparent; border:none; cursor:pointer;
    font-size:22px; line-height:1; color:var(--ink);
    padding:12px; user-select:none; transition:transform .15s ease;
  }
  .edge-left{ left:0; } .edge-right{ right:0; }
  .edge:active{ transform:translateY(-50%) scale(.85); }

  /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ï¼šãã‚…ã£ã¨ç‰ˆ */
  .cal{
    width:100%; border-collapse:collapse; table-layout:fixed;
    border:1px solid var(--grid); border-radius:8px; overflow:hidden; background:#fff;
  }
  .cal thead th{
    font-weight:600; font-size:12px; padding:6px 0; border-bottom:1px solid var(--grid);
  }
  .w-sun{ color:var(--sun); } .w-sat{ color:var(--sat); }

  .cal td{
    height:68px;                   /* 78â†’68 */
    border-right:1px solid var(--grid); border-bottom:1px solid var(--grid);
    vertical-align:top; padding:5px 5px 3px; position:relative;
  }
  .cal tr td:last-child{ border-right:none; }

  .daynum{ font-weight:700; font-size:12px; line-height:1; position:absolute; left:6px; top:5px; }
  .emoji{ position:absolute; right:3px; top:2px; font-size:12.5px; }
  .kanshi{ margin-top:16px; font-size:17px; font-weight:700; }
  .reading{ font-size:9.5px; color:var(--sub); margin-top:2px; }
  .empty{ background:#fafafa; }

  .cal td.today{ background:transparent; transition:background-color .8s ease; }
  .cal td.today.highlight{ background:var(--todaybg); }

  /* ä¸‹ã®ãƒ”ãƒ³ã‚¯ãƒœã‚¿ãƒ³ */
  .nav{ margin-top:12px; }
  .nav .btn{
    text-decoration:none; font-size:14px; font-weight:600;
    background:var(--nav-btn-bg); color:var(--nav-btn-fg);
    padding:8px 14px; border-radius:999px; display:inline-block;
  }

  /* ãƒ¢ãƒã‚¤ãƒ«å¾®èª¿æ•´ */
  @media (max-width:420px){
    .headnav{ gap:10px; font-size:13px; }
    .headnav a + a{ margin-left:10px; }
    .headnav a + a::before{ left:-8px; }

    .cal td{ height:62px; padding:4px 4px 3px; }
    .kanshi{ font-size:16px; margin-top:14px; }
    .reading{ font-size:9px; }
    .brand{ font-size:19px; }
    .m-num{ font-size:46px; }
    .monthbar{ min-height:38px; }
  }
</style>
</head>
<body>

  <!-- å³ä¸Šãƒ˜ãƒƒãƒ€ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆãƒ†ã‚­ã‚¹ãƒˆï¼‰ -->
  <div class="headnav">
    <a href="https://izuchan.com/iloilo-calendar-sestumei/">ä½¿ã„æ–¹</a>
    <a href="https://izuchan.com/gekkanshi-ichiran-2025/">æœˆå¹²æ”¯ä¸€è¦§</a>
    <a href="https://izuchan.com/">HOME</a>
  </div>

  <div class="wrap">
    <div class="card">
      <div class="brand">ilo.ilo å¹²æ”¯calendar</div>

      <div class="monthbar">
        <button class="edge edge-left" id="prevBtn" aria-label="å‰ã®æœˆã¸">â—€ï¸</button>
        <div class="centerhead">
          <span class="year" id="yy">2025</span>
          <span class="month"><span class="m-num" id="mmNum">9</span><span class="m-kanji">æœˆ</span></span>
          <span class="monthpick">
            <span class="label">å¹´æœˆ â–¼</span>
            <input type="month" id="monthInput" />
          </span>
        </div>
        <button class="edge edge-right" id="nextBtn" aria-label="æ¬¡ã®æœˆã¸">â–¶ï¸</button>
      </div>

      <table class="cal" id="calendar">
        <thead>
          <tr>
            <th class="w-sun">æ—¥</th><th>æœˆ</th><th>ç«</th><th>æ°´</th><th>æœ¨</th><th>é‡‘</th><th class="w-sat">åœŸ</th>
          </tr>
        </thead>
        <tbody id="cal-body"></tbody>
      </table>

      <div class="nav">
        <a class="btn" href="https://izuchan.com/iloilo-nikkanshi-checker/">ğŸ” æ—¥å¹²æ”¯ãƒã‚§ãƒƒã‚«ãƒ¼ã¸ â–¶ï¸</a>
      </div>
    </div>
  </div>

<script>
  /* å¹²æ”¯ãƒ‡ãƒ¼ã‚¿ */
  const stems = ["ç”²","ä¹™","ä¸™","ä¸","æˆŠ","å·±","åºš","è¾›","å£¬","ç™¸"];
  const stemsReading = ["ãã®ãˆ","ãã®ã¨","ã²ã®ãˆ","ã²ã®ã¨","ã¤ã¡ã®ãˆ","ã¤ã¡ã®ã¨","ã‹ã®ãˆ","ã‹ã®ã¨","ã¿ãšã®ãˆ","ã¿ãšã®ã¨"];
  const branches = ["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"];
  const branchesReading = ["ã­","ã†ã—","ã¨ã‚‰","ã†","ãŸã¤","ã¿","ã†ã¾","ã²ã¤ã˜","ã•ã‚‹","ã¨ã‚Š","ã„ã¬","ã„"];

  const stemEmoji = {"ç”²":"ğŸŒ³","ä¹™":"ğŸª»","ä¸™":"â˜€ï¸","ä¸":"ğŸ”¥","æˆŠ":"â›°ï¸","å·±":"ğŸª","åºš":"ğŸª¨","è¾›":"ğŸ’","å£¬":"ğŸŒŠ","ç™¸":"â˜”ï¸"};

  /* å¹²æ”¯è¨ˆç®—ï¼ˆ1984/3/31 = ç”²å­ï¼‰ */
  const baseDate = new Date(1984, 2, 31);
  function kanshiIndexFromDate(date){
    const diffDays = Math.floor((date - baseDate) / (1000*60*60*24));
    return (diffDays % 60 + 60) % 60;
  }

  let currentYear, currentMonth;
  const yy = document.getElementById('yy');
  const mmNum = document.getElementById('mmNum');
  const calBody = document.getElementById('cal-body');
  const monthInput = document.getElementById('monthInput');

  function supportsMonth(){
    const i = document.createElement('input');
    i.setAttribute('type','month');
    return i.type === 'month';
  }

  function renderCalendar(year, month){
    currentYear = year; currentMonth = month;
    yy.textContent = year;
    mmNum.textContent = month;

    const first = new Date(year, month-1, 1);
    theLast = new Date(year, month, 0).getDate();
    const startWeek = first.getDay();

    calBody.innerHTML = '';
    let day = 1;
    for(let r=0; r<6; r++){
      const tr = document.createElement('tr');
      for(let c=0; c<7; c++){
        const td = document.createElement('td');

        if(r===0 && c<startWeek){
          td.className = 'empty';
        } else if(day <= theLast){
          const date = new Date(year, month-1, day);
          const idx  = kanshiIndexFromDate(date);

          const stem = stems[idx % 10];
          const branch = branches[idx % 12];
          const k    = stem + branch;
          const rubi = stemsReading[idx % 10] + branchesReading[idx % 12];
          const emoji = stemEmoji[stem] || "";

          if(c===0){ td.style.color = getComputedStyle(document.documentElement).getPropertyValue('--sun'); }
          if(c===6){ td.style.color = getComputedStyle(document.documentElement).getPropertyValue('--sat'); }

          const today = new Date();
          if(date.getFullYear()===today.getFullYear() &&
             date.getMonth()===today.getMonth() &&
             date.getDate()===today.getDate()){
            td.classList.add('today');
          }

          td.innerHTML = `
            <div class="daynum">${day}</div>
            <div class="emoji">${emoji}</div>
            <div class="kanshi">${k}</div>
            <div class="reading">${rubi}</div>
          `;
          day++;
        } else {
          td.className = 'empty';
        }
        tr.appendChild(td);
      }
      calBody.appendChild(tr);
      if(day > theLast) break;
    }

    setTimeout(()=>{
      const todayCell = document.querySelector(".today");
      if(todayCell) todayCell.classList.add("highlight");
    },100);
  }

  if (supportsMonth()){
    monthInput.addEventListener('change', ()=>{
      if(!monthInput.value) return;
      const [y,m] = monthInput.value.split('-').map(v=>+v);
      renderCalendar(y,m);
    });
  } else {
    monthInput.type = 'text';
    monthInput.placeholder = 'YYYY-MM';
    monthInput.addEventListener('change', ()=>{
      const v = monthInput.value.trim();
      const ok = /^\d{4}-(0[1-9]|1[0-2])$/.test(v);
      if(ok){
        const [y,m] = v.split('-').map(v=>+v);
        renderCalendar(y,m);
      }
    });
  }

  document.getElementById('prevBtn').addEventListener('click', ()=>{
    let y = currentYear, m = currentMonth - 1;
    if(m < 1){ m = 12; y--; }
    renderCalendar(y,m);
    if(supportsMonth()){ monthInput.value = `${y}-${String(m).padStart(2,'0')}`; }
  });
  document.getElementById('nextBtn').addEventListener('click', ()=>{
    let y = currentYear, m = currentMonth + 1;
    if(m > 12){ m = 1; y++; }
    renderCalendar(y,m);
    if(supportsMonth()){ monthInput.value = `${y}-${String(m).padStart(2,'0')}`; }
  });

  (function(){
    const t = new Date();
    const yyyy = t.getFullYear();
    const mm = t.getMonth()+1;
    renderCalendar(yyyy, mm);
    if(supportsMonth()){
      monthInput.value = `${yyyy}-${String(mm).padStart(2,'0')}`;
    }
  })();
</script>
</body>
</html>
